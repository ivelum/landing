/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@sentry/browser@8.42.0/build/npm/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{GLOBAL_OBJ as e,getOriginalFunction as t,markFunctionWrapped as n,addNonEnumerableProperty as r,withScope as o,addExceptionTypeValue as a,addExceptionMechanism as s,captureException as i,resolvedSyncPromise as c,isErrorEvent as u,isDOMError as l,isDOMException as d,isError as p,isPlainObject as f,isEvent as m,isParameterizedString as g,getClient as h,normalizeToSize as v,extractExceptionKeysForMessage as y,dsnToString as b,createEnvelope as _,BaseClient as S,getSDKSource as E,applySdkMetadata as T,logger as x,createTransport as w,rejectedSyncPromise as k,createStackParser as P,UNKNOWN_FUNCTION as I,defineIntegration as R,addConsoleInstrumentationHandler as C,addFetchInstrumentationHandler as L,addBreadcrumb as O,getEventDescription as A,htmlTreeAsString as q,getComponentName as $,severityLevelFromString as N,safeJoin as D,getBreadcrumbLogLevelFromHttpStatusCode as H,parseUrl as F,fill as M,getFunctionName as j,addGlobalErrorInstrumentationHandler as U,captureEvent as B,addGlobalUnhandledRejectionInstrumentationHandler as z,isPrimitive as W,isString as X,getLocationHref as Y,applyAggregateErrorsToEvent as V,inboundFiltersIntegration as G,functionToStringIntegration as K,dedupeIntegration as J,consoleSandbox as Q,supportsFetch as Z,stackParserFromStackParserOptions as ee,getIntegrationsToSetup as te,initAndBind as ne,getCurrentScope as re,lastEventId as oe,getReportDialogEndpoint as ae,startSession as se,captureSession as ie,SDK_VERSION as ce,supportsReportingObserver as ue,captureMessage as le,supportsNativeFetch as de,isSentryRequestUrl as pe,stripUrlQueryAndFragment as fe,addContextToFrame as me,metrics as ge,BrowserMetricsAggregator as he,addFetchEndInstrumentationHandler as ve,instrumentFetchRequest as ye,spanToJSON as be,browserPerformanceTimeOrigin as _e,hasTracingEnabled as Se,setHttpStatus as Ee,getActiveSpan as Te,startInactiveSpan as xe,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN as we,SEMANTIC_ATTRIBUTE_SENTRY_OP as ke,SentryNonRecordingSpan as Pe,getTraceData as Ie,stringMatchesSomePattern as Re,getRootSpan as Ce,SPAN_STATUS_ERROR as Le,TRACING_DEFAULTS as Oe,registerSpanErrorInstrumentation as Ae,propagationContextFromHeaders as qe,spanIsSampled as $e,getDynamicSamplingContextFromSpan as Ne,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE as De,getIsolationScope as He,generateTraceId as Fe,getDomElement as Me,startIdleSpan as je,SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON as Ue,makeOfflineTransport as Be,serializeEnvelope as ze,parseEnvelope as We,forEachEnvelopeItem as Xe,timestampInSeconds as Ye,DEFAULT_ENVIRONMENT as Ve,uuid4 as Ge,getDebugImagesForResources as Ke}from"/npm/@sentry/core@8.42.0/+esm";export{SDK_VERSION,SEMANTIC_ATTRIBUTE_SENTRY_OP,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,Scope,addBreadcrumb,addEventProcessor,addIntegration,addTracingExtensions,captureConsoleIntegration,captureEvent,captureException,captureFeedback,captureMessage,captureSession,close,continueTrace,createTransport,debugIntegration,dedupeIntegration,endSession,extraErrorDataIntegration,flush,functionToStringIntegration,getActiveSpan,getClient,getCurrentHub,getCurrentScope,getGlobalScope,getIsolationScope,getRootSpan,getSpanDescendants,getSpanStatusFromHttpCode,inboundFiltersIntegration,isInitialized,lastEventId,makeMultiplexedTransport,moduleMetadataIntegration,parameterize,registerSpanErrorInstrumentation,rewriteFramesIntegration,sessionTimingIntegration,setContext,setCurrentClient,setExtra,setExtras,setHttpStatus,setMeasurement,setTag,setTags,setUser,spanToBaggageHeader,spanToJSON,spanToTraceHeader,startInactiveSpan,startNewTrace,startSession,startSpan,startSpanManual,suppressTracing,thirdPartyErrorFilterIntegration,withActiveSpan,withIsolationScope,withScope,zodErrorsIntegration}from"/npm/@sentry/core@8.42.0/+esm";import{getNativeImplementation as Je,clearCachedImplementation as Qe,addClickKeypressInstrumentationHandler as Ze,addXhrInstrumentationHandler as et,addHistoryInstrumentationHandler as tt,SENTRY_XHR_DATA_KEY as nt,addPerformanceInstrumentationHandler as rt,startTrackingWebVitals as ot,startTrackingINP as at,startTrackingLongAnimationFrames as st,startTrackingLongTasks as it,startTrackingInteractions as ct,registerInpInteractionListener as ut,addPerformanceEntries as lt}from"/npm/@sentry-internal/browser-utils@8.42.0/+esm";export{getReplay,replayIntegration}from"/npm/@sentry-internal/replay@8.42.0/+esm";export{replayCanvasIntegration}from"/npm/@sentry-internal/replay-canvas@8.42.0/+esm";import{buildFeedbackIntegration as dt,feedbackModalIntegration as pt,feedbackScreenshotIntegration as ft}from"/npm/@sentry-internal/feedback@8.42.0/+esm";export{getFeedback,sendFeedback}from"/npm/@sentry-internal/feedback@8.42.0/+esm";const mt=e;let gt=0;function ht(){return gt>0}function vt(e,c={}){if(!function(e){return"function"==typeof e}(e))return e;try{const n=e.__sentry_wrapped__;if(n)return"function"==typeof n?n:e;if(t(e))return e}catch(t){return e}const u=function(...t){try{const n=t.map((e=>vt(e,c)));return e.apply(this,n)}catch(e){throw gt++,setTimeout((()=>{gt--})),o((n=>{n.addEventProcessor((e=>(c.mechanism&&(a(e,void 0,void 0),s(e,c.mechanism)),e.extra={...e.extra,arguments:t},e))),i(e)})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(u[t]=e[t])}catch(e){}n(u,e),r(e,"__sentry_wrapped__",u);try{Object.getOwnPropertyDescriptor(u,"name").configurable&&Object.defineProperty(u,"name",{get:()=>e.name})}catch(e){}return u}const yt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function bt(e,t){const n=Et(e,t),r={type:wt(t),value:kt(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function _t(e,t,n,r){const o=h(),a=o&&o.getOptions().normalizeDepth,s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),i={__serialized__:v(t,a)};if(s)return{exception:{values:[bt(e,s)]},extra:i};const c={exception:{values:[{type:m(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Lt(t,{isUnhandledRejection:r})}]},extra:i};if(n){const t=Et(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function St(e,t){return{exception:{values:[bt(e,t)]}}}function Et(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&Tt.test(e.message))return 1;return 0}(t),o=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,o)}catch(e){}return[]}const Tt=/Minified React error #\d+;/i;function xt(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function wt(e){const t=e&&e.name;if(!t&&xt(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function kt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:xt(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function Pt(e,t,n,r){const o=Rt(e,t,n&&n.syntheticException||void 0,r);return s(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),c(o)}function It(e,t,n="info",r,o){const a=Ct(e,t,r&&r.syntheticException||void 0,o);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),c(a)}function Rt(e,t,n,r,o){let i;if(u(t)&&t.error){return St(e,t.error)}if(l(t)||d(t)){const o=t;if("stack"in t)i=St(e,t);else{const t=o.name||(l(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;i=Ct(e,s,n,r),a(i,s)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(p(t))return St(e,t);if(f(t)||m(t)){return i=_t(e,t,n,o),s(i,{synthetic:!0}),i}return i=Ct(e,t,n,r),a(i,`${t}`,void 0),s(i,{synthetic:!0}),i}function Ct(e,t,n,r){const o={};if(r&&n){const r=Et(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(g(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Lt(e,{isUnhandledRejection:t}){const n=y(e),r=t?"promise rejection":"exception";if(u(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(m(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function Ot(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:b(r)}},a=function(e){return[{type:"user_report"},e]}(e);return _(o,[a])}class At extends S{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e},n=mt.SENTRY_SDK_SOURCE||E();T(t,"browser",["browser"],n),super(t),t.sendClientReports&&mt.document&&mt.document.addEventListener("visibilitychange",(()=>{"hidden"===mt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return Pt(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return It(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(yt&&x.warn("SDK not enabled, will not capture user feedback."));const t=Ot(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}function qt(e,t=Je("fetch")){let n=0,r=0;return w(e,(function(o){const a=o.body.length;n+=a,r++;const s={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Qe("fetch"),k("No fetch implementation available");try{return t(e.url,s).then((e=>(n-=a,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return Qe("fetch"),n-=a,r--,k(e)}}))}function $t(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?I:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Nt=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Dt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ht=/\((\S*)(?::(\d+))(?::(\d+))\)/,Ft=[30,e=>{const t=Nt.exec(e);if(t){const[,e,n,r]=t;return $t(e,I,+n,+r)}const n=Dt.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=Ht.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Jt(n[1]||I,n[2]);return $t(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],Mt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,jt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ut=[50,e=>{const t=Mt.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=jt.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||I;return[n,e]=Jt(n,e),$t(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],Bt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,zt=[40,e=>{const t=Bt.exec(e);return t?$t(t[2],t[1]||I,+t[3],t[4]?+t[4]:void 0):void 0}],Wt=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Xt=[10,e=>{const t=Wt.exec(e);return t?$t(t[2],t[3]||I,+t[1]):void 0}],Yt=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Vt=[20,e=>{const t=Yt.exec(e);return t?$t(t[5],t[3]||t[4]||I,+t[1],+t[2]):void 0}],Gt=[Ft,Ut],Kt=P(...Gt),Jt=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:I,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Qt=1024,Zt=R(((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&C(function(e){return function(t){if(h()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:N(t.level),message:D(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${D(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}O(n,{input:t.args,level:t.level})}}(e)),t.dom&&Ze(function(e,t){return function(n){if(h()!==e)return;let r,o,a="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>Qt&&(yt&&x.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=Qt),"string"==typeof a&&(a=[a]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=q(t,{keyAttrs:a,maxStringLength:s}),o=$(t)}catch(e){r="<unknown>"}if(0===r.length)return;const i={category:`ui.${n.name}`,message:r};o&&(i.data={"ui.component_name":o}),O(i,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&et(function(e){return function(t){if(h()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[nt];if(!n||!r||!o)return;const{method:a,url:s,status_code:i,body:c}=o,u={method:a,url:s,status_code:i},l={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},d=H(i);O({category:"xhr",data:u,type:"http",level:d},l)}}(e)),t.fetch&&L(function(e){return function(t){if(h()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){const e=t.fetchData,o={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r};O({category:"fetch",data:e,level:"error",type:"http"},o)}else{const e=t.response,o={...t.fetchData,status_code:e&&e.status},a={input:t.args,response:e,startTimestamp:n,endTimestamp:r},s=H(o.status_code);O({category:"fetch",data:o,type:"http",level:s},a)}}}(e)),t.history&&tt(function(e){return function(t){if(h()!==e)return;let n=t.from,r=t.to;const o=F(mt.location.href);let a=n?F(n):void 0;const s=F(r);a&&a.path||(a=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),O({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){h()===e&&O({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:A(t)},{event:t})}}(e))}}}));const en=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],tn=R(((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&M(mt,"setTimeout",nn),t.setInterval&&M(mt,"setInterval",nn),t.requestAnimationFrame&&M(mt,"requestAnimationFrame",rn),t.XMLHttpRequest&&"XMLHttpRequest"in mt&&M(XMLHttpRequest.prototype,"send",on);const e=t.eventTarget;if(e){(Array.isArray(e)?e:en).forEach(an)}}}}));function nn(e){return function(...t){const n=t[0];return t[0]=vt(n,{mechanism:{data:{function:j(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function rn(e){return function(t){return e.apply(this,[vt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:j(e)},handled:!1,type:"instrument"}})])}}function on(e){return function(...n){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&M(r,e,(function(n){const r={mechanism:{data:{function:e,handler:j(n)},handled:!1,type:"instrument"}},o=t(n);return o&&(r.mechanism.data.handler=j(o)),vt(n,r)}))})),e.apply(this,n)}}function an(e){const t=mt[e],n=t&&t.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(M(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=vt(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:j(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,vt(r,{mechanism:{data:{function:"addEventListener",handler:j(r),target:e},handled:!1,type:"instrument"}}),o])}})),M(n,"removeEventListener",(function(e){return function(t,n,r){try{const o=n.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(e){}return e.call(this,t,n,r)}})))}const sn=R(((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){U((t=>{const{stackParser:n,attachStacktrace:r}=un();if(h()!==e||ht())return;const{msg:o,url:a,line:s,column:i,error:c}=t,u=function(e,t,n,r){const o=e.exception=e.exception||{},a=o.values=o.values||[],s=a[0]=a[0]||{},i=s.stacktrace=s.stacktrace||{},c=i.frames=i.frames||[],u=isNaN(parseInt(r,10))?void 0:r,l=isNaN(parseInt(n,10))?void 0:n,d=X(t)&&t.length>0?t:Y();0===c.length&&c.push({colno:u,filename:d,function:I,in_app:!0,lineno:l});return e}(Rt(n,c||o,void 0,r,!1),a,s,i);u.level="error",B(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}(e),cn("onerror")),t.onunhandledrejection&&(!function(e){z((t=>{const{stackParser:n,attachStacktrace:r}=un();if(h()!==e||ht())return;const o=function(e){if(W(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),a=W(o)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(o)}`}]}}:Rt(n,o,void 0,r,!0);a.level="error",B(a,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),cn("onunhandledrejection"))}}}));function cn(e){yt&&x.log(`Global Handler attached: ${e}`)}function un(){const e=h();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const ln=R((()=>({name:"HttpContext",preprocessEvent(e){if(!mt.navigator&&!mt.location&&!mt.document)return;const t=e.request&&e.request.url||mt.location&&mt.location.href,{referrer:n}=mt.document||{},{userAgent:r}=mt.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},a={...e.request,...t&&{url:t},headers:o};e.request=a}}))),dn=R(((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){const a=o.getOptions();V(bt,a.stackParser,a.maxValueLength,n,t,e,r)}}}));function pn(e){return[G(),K(),tn(),Zt(),sn(),dn(),J(),ln()]}function fn(e={}){const t=function(e={}){const t={defaultIntegrations:pn(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:mt.SENTRY_RELEASE&&mt.SENTRY_RELEASE.id?mt.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}(e);if(!t.skipBrowserExtensionCheck&&function(){const e=void 0!==mt.window&&mt;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=mt.location&&mt.location.href||"",o=!!n&&mt===mt.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),a=void 0!==e.nw;return!!n&&!o&&!a}())return void Q((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));yt&&(Z()||x.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:ee(t.stackParser||Kt),integrations:te(t),transport:t.transport||qt},r=ne(At,n);return t.autoSessionTracking&&function(){if(void 0===mt.document)return void(yt&&x.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));se({ignoreDuration:!0}),ie(),tt((({from:e,to:t})=>{void 0!==e&&e!==t&&(se({ignoreDuration:!0}),ie())}))}(),r}function mn(e={}){if(!mt.document)return void(yt&&x.error("Global document not defined in showReportDialog call"));const t=re(),n=t.getClient(),r=n&&n.getDsn();if(!r)return void(yt&&x.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=oe();t&&(e.eventId=t)}const o=mt.document.createElement("script");o.async=!0,o.crossOrigin="anonymous",o.src=ae(r,e),e.onLoad&&(o.onload=e.onLoad);const{onClose:a}=e;if(a){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{a()}finally{mt.removeEventListener("message",e)}};mt.addEventListener("message",e)}const s=mt.document.head||mt.document.body;s?s.appendChild(o):yt&&x.error("Not injecting report dialog. No injection point found in HTML")}function gn(){}function hn(e){e()}function vn(e){const t=h();t&&t.captureUserFeedback(e)}const yn={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata"},bn=mt;async function _n(e,t){const n=yn[e],r=bn.Sentry=bn.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const o=r[e];if("function"==typeof o&&!("_isShim"in o))return o;const a=function(e){const t=h(),n=t&&t.getOptions(),r=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${ce}/${e}.min.js`,r).toString()}(n),s=mt.document.createElement("script");s.src=a,s.crossOrigin="anonymous",s.referrerPolicy="origin",t&&s.setAttribute("nonce",t);const i=new Promise(((e,t)=>{s.addEventListener("load",(()=>e())),s.addEventListener("error",t)})),c=mt.document.currentScript,u=mt.document.body||mt.document.head||c&&c.parentElement;if(!u)throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);u.appendChild(s);try{await i}catch(t){throw new Error(`Error when loading integration: ${e}`)}const l=r[e];if("function"!=typeof l)throw new Error(`Could not load integration: ${e}`);return l}const Sn=e,En=new WeakMap,Tn=R(((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(En.has(h()))for(const t of e)o((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let r="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;r=[e.crashId||"",e.reason||""].join(" ").trim()||r}else{r=t.body.message||r}}le(`${n}: ${r}`)}))}return{name:"ReportingObserver",setupOnce(){if(!ue())return;new Sn.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){En.set(e,!0)}}})),xn=R(((t={})=>{const n={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...t};return{name:"HttpClient",setup(t){!function(e,t){if(!de())return;L((n=>{if(h()!==e)return;const{response:r,args:o}=n,[a,s]=o;r&&function(e,t,n,r){if(In(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,a,s,i;Cn()&&([o,s]=wn("Cookie",e),[a,i]=wn("Set-Cookie",n));const c=Rn({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:a,requestCookies:s,responseCookies:i});B(c)}}(t,a,r,s)}))}(t,n),function(t,n){if(!("XMLHttpRequest"in e))return;et((e=>{if(h()!==t)return;const r=e.xhr,o=r[nt];if(!o)return;const{method:a,request_headers:s}=o;try{!function(e,t,n,r){if(In(e,t.status,t.responseURL)){let e,o,a;if(Cn()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(o=Pn(e))}catch(e){}try{a=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e}),{})}(t)}catch(e){}e=r}const s=Rn({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:a,responseCookies:o});B(s)}}(n,r,a,s)}catch(e){yt&&x.warn("Error while extracting response event form XHR response",e)}}))}(t,n)}}}));function wn(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=Pn(t))}catch(e){}return[n,r]}function kn(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Pn(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e}),{})}function In(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!pe(n,h());var r,o}function Rn(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:kn(e.responseHeaders)}}};return s(n,{type:"http.client",handled:!1}),n}function Cn(){const e=h();return!!e&&Boolean(e.getOptions().sendDefaultPii)}const Ln=e,On=R(((e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>function(e,t){const n=Ln.document,r=Ln.location&&fe(Ln.location.href);if(!n||!r)return e;const o=e.exception&&e.exception.values;if(!o||!o.length)return e;const a=n.documentElement.innerHTML;if(!a)return e;const s=["<!DOCTYPE html>","<html>",...a.split("\n"),"</html>"];return o.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>function(e,t,n,r){if(e.filename!==n||!e.lineno||!t.length)return e;return me(t,e,r),e}(e,s,r,t))))})),e}(e,t)}}));const An=dt({lazyLoadIntegration:_n}),qn=dt({lazyLoadIntegration:_n,getModalIntegration:()=>pt,getScreenshotIntegration:()=>ft});const $n={increment:function(e,t=1,n){ge.increment(he,e,t,n)},distribution:function(e,t,n){ge.distribution(he,e,t,n)},set:function(e,t,n){ge.set(he,e,t,n)},gauge:function(e,t,n){ge.gauge(he,e,t,n)},timing:function(e,t,n="second",r){return ge.timing(he,e,t,n,r)}},Nn=new WeakMap,Dn=new Map,Hn={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Fn(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:a,enableHTTPTimings:s,tracePropagationTargets:i}={traceFetch:Hn.traceFetch,traceXHR:Hn.traceXHR,trackFetchStreamPerformance:Hn.trackFetchStreamPerformance,...t},c="function"==typeof a?a:e=>!0,u=e=>function(e,t){const n=mt.location&&mt.location.href;if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch(e){return!1}const a=r.origin===o;return t?Re(r.toString(),t)||a&&Re(r.pathname,t):a}{const n=!!e.match(/^\/(?!\/)/);return t?Re(e,t):n}}(e,i),l={};n&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Dn.get(e.span_id);t&&(e.timestamp=t/1e3,Dn.delete(e.span_id))}})),e))),o&&ve((e=>{if(e.response){const t=Nn.get(e.response);t&&e.endTimestamp&&Dn.set(t,e.endTimestamp)}})),L((e=>{const t=ye(e,c,u,l);if(e.response&&e.fetchData.__span&&Nn.set(e.response,e.fetchData.__span),t){const n=Un(e.fetchData.url),r=n?F(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}s&&t&&Mn(t)}))),r&&et((e=>{const t=function(e,t,n,r){const o=e.xhr,a=o&&o[nt];if(!o||o.__sentry_own_request__||!a)return;const s=Se()&&t(a.url);if(e.endTimestamp&&s){const e=o.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==a.status_code&&(Ee(t,a.status_code),t.end(),delete r[e]))}const i=Un(a.url),c=i?F(i).host:void 0,u=!!Te(),l=s&&u?xe({name:`${a.method} ${a.url}`,attributes:{type:"xhr","http.method":a.method,"http.url":i,url:a.url,"server.address":c,[we]:"auto.http.browser",[ke]:"http.client"}}):new Pe;o.__sentry_xhr_span_id__=l.spanContext().spanId,r[o.__sentry_xhr_span_id__]=l,n(a.url)&&function(e,t){const{"sentry-trace":n,baggage:r}=Ie({span:t});n&&function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch(e){}}(e,n,r)}(o,Se()&&u?l:void 0);return l}(e,c,u,l);s&&t&&Mn(t)}))}function Mn(e){const{url:t}=be(e).data||{};if(!t||"string"!=typeof t)return;const n=rt("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}r===e&&(t=r);return{name:t,version:n}}(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!_e)return r;return[...r,["http.request.redirect_start",jn(e.redirectStart)],["http.request.fetch_start",jn(e.fetchStart)],["http.request.domain_lookup_start",jn(e.domainLookupStart)],["http.request.domain_lookup_end",jn(e.domainLookupEnd)],["http.request.connect_start",jn(e.connectStart)],["http.request.secure_connection_start",jn(e.secureConnectionStart)],["http.request.connection_end",jn(e.connectEnd)],["http.request.request_start",jn(e.requestStart)],["http.request.response_start",jn(e.responseStart)],["http.request.response_end",jn(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function jn(e=0){return((_e||performance.timeOrigin)+e)/1e3}function Un(e){try{return new URL(e,mt.location.origin).href}catch(e){return}}const Bn={...Oe,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...Hn},zn=(t={})=>{Ae();const{enableInp:n,enableLongTask:r,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:s},beforeStartSpan:i,idleTimeout:c,finalTimeout:u,childSpanTimeout:l,markBackgroundSpan:d,traceFetch:p,traceXHR:f,trackFetchStreamPerformance:m,shouldCreateSpanForRequest:g,enableHTTPTimings:v,instrumentPageLoad:y,instrumentNavigation:b}={...Bn,...t},_=ot({recordClsStandaloneSpans:s||!1});n&&at(),o&&e.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?st():r&&it(),a&&ct();const S={name:void 0,source:void 0};function E(e,t){const n="pageload"===t.op,r=i?i(t):t,o=r.attributes||{};t.name!==r.name&&(o[De]="custom",r.attributes=o),S.name=r.name,S.source=o[De];const a=je(r,{idleTimeout:c,finalTimeout:u,childSpanTimeout:l,disableAutoFinish:n,beforeSpanEnd:e=>{_(),lt(e,{recordClsOnPageloadSpan:!s})}});function d(){["interactive","complete"].includes(mt.document.readyState)&&e.emit("idleSpanEnableAutoFinish",a)}return n&&mt.document&&(mt.document.addEventListener("readystatechange",(()=>{d()})),d()),a}return{name:"BrowserTracing",afterAllSetup(e){let t,r=mt.location&&mt.location.href;function o(){t&&!be(t).timestamp&&(yt&&x.log(`[Tracing] Finishing current active span with op: ${be(t).op}`),t.end())}e.on("startNavigationSpan",(n=>{h()===e&&(o(),t=E(e,{op:"navigation",...n}))})),e.on("startPageLoadSpan",((n,r={})=>{if(h()!==e)return;o();const a=r.sentryTrace||Yn("sentry-trace"),s=r.baggage||Yn("baggage"),i=qe(a,s);re().setPropagationContext(i),t=E(e,{op:"pageload",...n})})),e.on("spanEnd",(e=>{const t=be(e).op;if(e!==Ce(e)||"navigation"!==t&&"pageload"!==t)return;const n=re(),r=n.getPropagationContext();n.setPropagationContext({...r,sampled:void 0!==r.sampled?r.sampled:$e(e),dsc:r.dsc||Ne(e)})})),mt.location&&(y&&Wn(e,{name:mt.location.pathname,startTime:_e?_e/1e3:void 0,attributes:{[De]:"url",[we]:"auto.pageload.browser"}}),b&&tt((({to:t,from:n})=>{void 0===n&&r&&-1!==r.indexOf(t)?r=void 0:n!==t&&(r=void 0,Xn(e,{name:mt.location.pathname,attributes:{[De]:"url",[we]:"auto.navigation.browser"}}))}))),d&&(mt&&mt.document?mt.document.addEventListener("visibilitychange",(()=>{const e=Te();if(!e)return;const t=Ce(e);if(mt.document.hidden&&t){const e="cancelled",{op:n,status:r}=be(t);yt&&x.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:Le,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):yt&&x.warn("[Tracing] Could not set up background tab detection due to lack of global document")),a&&function(e,t,n,r){let o;const a=()=>{const a="ui.action.click",s=Te(),i=s&&Ce(s);if(i){const e=be(i).op;if(["navigation","pageload"].includes(e))return void(yt&&x.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`))}o&&(o.setAttribute(Ue,"interactionInterrupted"),o.end(),o=void 0),r.name?o=je({name:r.name,op:a,attributes:{[De]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):yt&&x.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`)};mt.document&&addEventListener("click",a,{once:!1,capture:!0})}(c,u,l,S),n&&ut(),Fn(e,{traceFetch:p,traceXHR:f,trackFetchStreamPerformance:m,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:g,enableHTTPTimings:v})}}};function Wn(e,t,n){e.emit("startPageLoadSpan",t,n),re().setTransactionName(t.name);const r=Te();return"pageload"===(r&&be(r).op)?r:void 0}function Xn(e,t){He().setPropagationContext({traceId:Fe()}),re().setPropagationContext({traceId:Fe()}),e.emit("startNavigationSpan",t),re().setTransactionName(t.name);const n=Te();return"navigation"===(n&&be(n).op)?n:void 0}function Yn(e){const t=Me(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function Vn(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function Gn(e){return Vn(e.getAllKeys())}function Kn(e){let t;function n(){return null==t&&(t=function(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=Vn(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await ze(t);await function(e,t,n){return e((e=>Gn(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),Vn(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await ze(t);await function(e,t,n){return e((e=>Gn(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),Vn(e.transaction)}))))}(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await function(e){return e((e=>Gn(e).then((t=>{const n=t[0];if(null!=n)return Vn(e.get(n)).then((t=>(e.delete(n),Vn(e.transaction).then((()=>t)))))}))))}(n());if(e)return We(e)}catch(e){}}}}function Jn(e=qt){return function(e){return t=>e({...t,createStore:Kn})}(Be(e))}const Qn=1e6,Zn=String(0),er="main";let tr="",nr="",rr="",or=mt.navigator&&mt.navigator.userAgent||"",ar="";const sr=mt.navigator&&mt.navigator.language||mt.navigator&&mt.navigator.languages&&mt.navigator.languages[0]||"";const ir=mt.navigator&&mt.navigator.userAgentData;var cr;function ur(e){return function(e){return!("thread_metadata"in e)}(e)?function(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Zn]:{name:er}}},o=e.samples[0];if(!o)return r;const a=o.timestamp,s="number"==typeof performance.timeOrigin?performance.timeOrigin:_e||0,i=s-(_e||s);return e.samples.forEach(((o,s)=>{if(void 0===o.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[s]={elapsed_since_start_ns:((o.timestamp+i-a)*Qn).toFixed(0),stack_id:t,thread_id:Zn});let c=e.stacks[o.stackId];const u=[];for(;c;){u.push(c.frameId);const t=e.frames[c.frameId];t&&void 0===r.frames[c.frameId]&&(r.frames[c.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),c=void 0===c.parentId?void 0:e.stacks[c.parentId]}const l={elapsed_since_start_ns:((o.timestamp+i-a)*Qn).toFixed(0),stack_id:n,thread_id:Zn};r.stacks[n]=u,r.samples[s]=l,n++})),r}(e):e}function lr(e,t,n,r){if("transaction"!==r.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const o=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&yt&&x.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(r),a=ur(n),s=t||("number"==typeof r.start_timestamp?1e3*r.start_timestamp:1e3*Ye()),i="number"==typeof r.timestamp?1e3*r.timestamp:1e3*Ye();return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Ve,runtime:{name:"javascript",version:mt.navigator.userAgent},os:{name:tr,version:nr,build_number:or},device:{locale:sr,model:ar,manufacturer:or,architecture:rr,is_emulator:!1},debug_meta:{images:pr(n.resources)},profile:a,transactions:[{name:r.transaction||"",id:r.event_id||Ge(),trace_id:o,active_thread_id:Zn,relative_start_ns:"0",relative_end_ns:(1e6*(i-s)).toFixed(0)}]}}function dr(e){return"pageload"===be(e).op}function pr(e){const t=h(),n=t&&t.getOptions(),r=n&&n.stackParser;return r?Ke(r,e):[]}"object"==typeof(cr=ir)&&null!==cr&&"getHighEntropyValues"in cr&&ir.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(tr=e.platform||"",rr=e.architecture||"",ar=e.model||"",nr=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];or=`${t.brand} ${t.version}`}})).catch((e=>{}));let fr=!1;const mr=3e4;function gr(e){if(fr)return yt&&x.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return yt&&x.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=h(),n=t&&t.getOptions();if(!n)return yt&&x.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;if(!("number"!=typeof(o=r)&&"boolean"!=typeof o||"number"==typeof o&&isNaN(o)?(yt&&x.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),0):!0===o||!1===o||!(o<0||o>1)||(yt&&x.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${o}.`),0)))return yt&&x.warn("[Profiling] Discarding profile because of invalid sample rate."),!1;var o;if(!r)return yt&&x.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1;return!!(!0===r||Math.random()<r)||(yt&&x.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1)}function hr(e,t,n,r){return function(e){return e.samples.length<2?(yt&&x.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(yt&&x.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?lr(e,t,n,r):null}const vr=new Map;function yr(e){const t=vr.get(e);return t&&vr.delete(e),t}function br(e){let t;dr(e)&&(t=1e3*Ye());const n=function(){const e=mt.Profiler;if("function"!=typeof e)return void(yt&&x.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(mr/10);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){yt&&(x.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),x.log("[Profiling] Disabling profiling for current user session.")),fr=!0}}();if(!n)return;yt&&x.log(`[Profiling] started profiling span: ${be(e).description}`);const r=Ge();async function o(){if(e&&n)return n.stop().then((t=>{a&&(mt.clearTimeout(a),a=void 0),yt&&x.log(`[Profiling] stopped profiling of span: ${be(e).description}`),t?function(e,t){if(vr.set(e,t),vr.size>30){const e=vr.keys().next().value;vr.delete(e)}}(r,t):yt&&x.log(`[Profiling] profiler returned null profile for: ${be(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{yt&&x.log("[Profiling] error while stopping profiler:",e)}))}re().setContext("profile",{profile_id:r,start_timestamp:t});let a=mt.setTimeout((()=>{yt&&x.log("[Profiling] max profile duration elapsed, stopping profiling for:",be(e).description),o()}),mr);const s=e.end.bind(e);e.end=function(){return e?(o().then((()=>{s()}),(()=>{s()})),e):s()}}const _r=R((()=>({name:"BrowserProfiling",setup(e){const t=Te(),n=t&&Ce(t);n&&dr(n)&&gr(n)&&br(n),e.on("spanStart",(e=>{e===Ce(e)&&gr(e)&&br(e)})),e.on("beforeEnvelope",(e=>{if(!vr.size)return;const t=function(e){const t=[];return Xe(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t}(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,o=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){yt&&x.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!r){yt&&x.log("[Profiling] cannot find profile for a span without a profile context");continue}t&&t.profile&&delete t.profile;const a=yr(r);if(!a){yt&&x.log(`[Profiling] Could not retrieve profile for span: ${r}`);continue}const s=hr(r,o,a,e);s&&n.push(s)}!function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n])}(e,n)}))}})));const Sr=R(((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:"SpotlightBrowser",setup:()=>{yt&&x.log("Using Sidecar URL",t)},processEvent:e=>function(e){return Boolean("transaction"===e.type&&e.spans&&e.contexts&&e.contexts.trace&&"ui.action.click"===e.contexts.trace.op&&e.spans.some((({description:e})=>e&&e.includes("#sentry-spotlight"))))}(e)?null:e,afterAllSetup:e=>{!function(e,t){const n=Je("fetch");let r=0;e.on("beforeEnvelope",(e=>{r>3?x.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r):n(t,{method:"POST",body:ze(e),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then((e=>{e.status>=200&&e.status<400&&(r=0)}),(e=>{r++,x.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",e)}))}))}(e,t)}}}));export{At as BrowserClient,mt as WINDOW,Zt as breadcrumbsIntegration,tn as browserApiErrorsIntegration,_r as browserProfilingIntegration,zn as browserTracingIntegration,vn as captureUserFeedback,Ft as chromeStackLineParser,On as contextLinesIntegration,Ot as createUserFeedbackEnvelope,Hn as defaultRequestInstrumentationOptions,Gt as defaultStackLineParsers,Kt as defaultStackParser,Pt as eventFromException,It as eventFromMessage,bt as exceptionFromError,An as feedbackAsyncIntegration,qn as feedbackIntegration,qn as feedbackSyncIntegration,gn as forceLoad,Ut as geckoStackLineParser,pn as getDefaultIntegrations,sn as globalHandlersIntegration,xn as httpClientIntegration,ln as httpContextIntegration,fn as init,Fn as instrumentOutgoingRequests,_n as lazyLoadIntegration,dn as linkedErrorsIntegration,Jn as makeBrowserOfflineTransport,qt as makeFetchTransport,$n as metrics,hn as onLoad,Xt as opera10StackLineParser,Vt as opera11StackLineParser,Tn as reportingObserverIntegration,mn as showReportDialog,Sr as spotlightBrowserIntegration,Xn as startBrowserTracingNavigationSpan,Wn as startBrowserTracingPageLoadSpan,zt as winjsStackLineParser};export default null;
